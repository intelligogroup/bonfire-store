!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@intelligo.ai/bonfire"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@intelligo.ai/bonfire-store",["exports","@angular/core","@intelligo.ai/bonfire","rxjs/operators"],t):t(((e=e||self).intelligo=e.intelligo||{},e.intelligo.ai=e.intelligo.ai||{},e.intelligo.ai["bonfire-store"]={}),e.ng.core,e.bonfire,e.rxjs.operators)}(this,(function(e,t,r,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}!function(e){e.Config=function(){},e.BONFIRE_CONFIG=new t.InjectionToken("BONFIRE_CONFIG");var o=function(){function e(e,t){this.name=t,e&&(this.store=e)}return e.prototype.get$=function(e,t){return this.store$.asObservable().pipe(n.map((function(t){return e?t[e]:t})),n.tap(t||function(e){}))},e.prototype.set$=function(e,t){this.store[e]=t},e.prototype._get=function(e){return this.store[e]},i([r.WithObservable(),c("design:type",Object)],e.prototype,"store",void 0),e}();e.Store=o,e.SubStores=function(){}}(e.ɵa||(e.ɵa={}));var u=function(n){function u(e){var t=n.call(this,e)||this;return t.initialValue=e,t.subStores=[],t.store=t.initialValue,t}return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(u,n),u.prototype.createLocalStore=function(t){var r=(1e9*Math.random()).toFixed();return this.subStores.push(new e.ɵa.Store(t,r)),this.subStores[this.subStores.length-1]},u.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],u.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[e.ɵa.BONFIRE_CONFIG]}]}]},u.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new u(t.ɵɵinject(e.ɵa.BONFIRE_CONFIG))},token:u,providedIn:"root"}),i([r.WithObservable(),c("design:type",Array)],u.prototype,"subStores",void 0),u}(e.ɵa.Store);var a=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"false-bonfire-store",template:"\n    <p>\n      bonfire-store works!\n    </p>\n  "}]}],e.ctorParameters=function(){return[]},e}(),f=function(){function r(){}return r.forRoot=function(t){return void 0===t&&(t={}),{ngModule:r,providers:[{provide:e.ɵa.BONFIRE_CONFIG,useValue:t}]}},r.decorators=[{type:t.NgModule,args:[{declarations:[a],imports:[],exports:[a]}]}],r}();function s(e){var t;switch(e){case"SERVICE_NOT_FOUND":t="\n      Injection Error. Decorator Can't work without injecting the main store service.\n\n      Example:\n\n        constructor(\n          ===> private bonfireStoreService: BonfireStoreService<{ counter: number }, LocalStore>\n        ) { }\n    ";break;case"LOCAL_STORE_NOT_FOUND":t="\n      Creation Error. Local store is not found.\n\n      Example:\n\n      ===> localStore = this.bonfireStoreService.createLocalStore('SOME_NAME', { ... });\n\n      constructor(\n        private bonfireStoreService: BonfireStoreService<{ counter: number }, LocalStore>\n      ) { }\n      "}if(t)throw new Error(t)}e.BonfireStore=e.ɵa,e.BonfireStoreComponent=a,e.BonfireStoreModule=f,e.BonfireStoreService=u,e.FromLocalStore=function(t){return function(r,n){var o=function(r){return function(o){var i=Object.values(this).find((function(t){return t instanceof e.ɵa.Store&&!(t instanceof u)}));if(i||s("LOCAL_STORE_NOT_FOUND"),Object.defineProperty(this,n,{get:function(){return i.get$(t)},set:function(e){i.set$(t,e)},enumerable:!0,configurable:!0}),r)return this[n];this[n]=o}};return Object.defineProperty(r,n,{get:o(!0),set:o(!1),enumerable:!0,configurable:!0})}},e.FromStore=function(e){return function(t,r){var n=function(t){return function(n){var o=Object.values(this).find((function(e){return e instanceof u}));if(o||s("SERVICE_NOT_FOUND"),e||(e=r),Object.defineProperty(this,r,{get:function(){return o.get$(e)},set:function(t){o.set$(e,t)},enumerable:!0,configurable:!0}),t)return this[r];this[r]=n}};return Object.defineProperty(t,r,{get:n(!0),set:n(!1),enumerable:!0,configurable:!0})}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=intelligo.ai-bonfire-store.umd.min.js.map